var os = require("os");
var addon;
if(os.arch()=="x64"){
	addon= require('../build/x64/pSpace');
}else{
	addon = require('../build/win32/pSpace');
}
var emitter = require('events').EventEmitter;
var Util = require('util');
var pspace= new addon.Client();
var Err = addon.Error;

module.exports = ps;
Util.inherits(ps, emitter);

function ps() {
  emitter.call(this);
  this.Err = Err;
}
ps.prototype.open = function(args,cb){
	if(cb!=null){
		pspace.connect(args,function(err,con){
			cb(err,con);
		});
	}else{
		return pspace.connect(args);
	}	
}
ps.prototype.isConnected = function(){
	return pspace.isConnected();	
}

