var csv = require("csv");
var fs = require('fs');
function ReadCsv(){
  this.readFile = readFile;
}


ReadCsv.readFile = function(path,cb){
  var exits = fs.existsSync(path);
  if(!exits){
    cb("文件不存在");
    return false;
  }else{
     csv().from.path(path,{columns:true,encoding: 'binary'})
    .transform(function(configData,index){return configData;})
    .to.array(function(configData){ cb(null,configData);})
    .on('close', function(count){console.log(" 文件已经关闭");})
    .on('error', function(error){cb(error.message,null);}); 
  }
 
}
module.exports = ReadCsv;